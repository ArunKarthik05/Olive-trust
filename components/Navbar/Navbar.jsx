'use client'
import React, { useState } from 'react'
import styles from "./Navbar.module.scss";
import useIsMobile from '@/Hooks/IsMobile';

export default function Navbar({navItems,refs,activeIndex,setActiveIndex}) {
  const isMobile = useIsMobile();
  const [isOpen, setIsOpen] = useState(false);


  const handleClick= (index,link)=>{
    console.log(link)
    setActiveIndex(index);
    setIsOpen(false);
    const currentRef = refs[link].current;
    console.log(currentRef)
    if (currentRef) {
      currentRef.scrollIntoView({ behavior: 'smooth' });
    }
  };

  const handleContact = ()=>{
    if(refs["contact"].current)
      refs["contact"].current.scrollIntoView({behavior:"smooth"})
  }


  return (
    <nav className={styles.nav}>
        <div className={styles.mobileLogo}>
        <div className={styles.logo}>
        <svg width="32" height="32" viewBox="0 0 32 25" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M3.97213 5.64777C3.97213 5.64777 2.6705 7.11601 3.17113 8.1529C3.67175 9.18979 3.34634 9.82023 3.34634 9.82023C3.34634 9.82023 4.21409 8.55107 3.83863 7.72155C3.50488 6.93351 4.09728 6.104 3.97213 5.64777Z" fill="#699635"/>
        <path d="M0.300903 11.753C0.300903 11.753 1.89456 12.0185 2.35347 10.9401C2.81237 9.9032 3.58834 9.86172 3.58834 9.86172C3.58834 9.86172 2.19494 9.72071 1.81947 10.5087C1.40228 11.2968 0.551216 11.4212 0.300903 11.753Z" fill="#699635"/>
        <path d="M5.67424 6.62659C5.67424 6.62659 4.24746 7.92893 4.45605 9.13172C4.66465 10.293 4.08893 10.8571 4.08893 10.8571C4.08893 10.8571 5.24037 9.94465 5.07349 9.03218C4.94833 8.11971 5.67424 7.08282 5.67424 6.62659Z" fill="#699635"/>
        <path d="M1.73596 13.5613C1.73596 13.5613 3.17943 13.2876 3.38802 12.0848C3.5549 10.882 4.25578 10.7327 4.25578 10.7327C4.25578 10.7327 2.8874 11.023 2.72052 11.9355C2.59537 12.848 1.90284 13.1051 1.73596 13.5613Z" fill="#699635"/>
        <path d="M1.66473 7.64648C2.7543 8.54277 3.72713 9.88719 4.46648 11.3212C5.24474 12.8001 5.75062 14.5479 5.67279 16.4301H5.63388C5.36148 14.6823 4.97235 12.9794 4.27192 11.5005C3.96061 10.8283 3.61039 10.2009 3.22126 9.61831C2.94887 9.21498 2.67648 8.81165 2.36517 8.45314C2.24843 8.27388 1.66473 7.78093 1.66473 7.64648Z" fill="#83BF4F"/>
        <path d="M0.0583496 6.84796C0.0583496 6.84796 0.471824 8.58795 1.32729 8.54749C2.12572 8.66079 2.46791 9.24348 2.46791 9.24348C2.46791 9.24348 2.00453 7.722 1.32729 7.722C0.685691 7.68154 0.379149 6.96936 0.0583496 6.84796Z" fill="#699635"/>
        <path d="M5.98531 11.639L4.07428 13.236L6.48384 12.9166L5.98531 11.639Z" fill="#FFCE31"/>
        <path d="M10.4998 12.606C10.6207 9.24423 15.1764 6.51281 17.5954 2.18456C18.6436 0.335596 19.5305 1.3021 18.8855 4.66385C23.038 5.46227 15.6602 14.9592 14.1685 15.6316L10.4998 12.606Z" fill="#FF8EED"/>
        <path d="M10.472 12.8479C10.5971 9.52988 16.7715 7.87085 19.4832 4.30393C25.157 -3.1617 26.5337 0.985874 23.3214 3.43294C27.6184 4.22098 22.3201 6.99986 22.3201 6.99986C27.0761 7.24871 21.9446 9.77873 21.9446 9.77873C25.9079 10.5253 20.6931 11.9355 20.6931 11.9355C23.3214 12.8894 19.6084 13.9263 19.6084 13.9263C21.4857 15.378 17.7728 15.5439 16.2292 16.2075L10.472 12.8479Z" fill="#FF17DA"/>
        <path d="M5.63257 12.5576C5.63257 11.7696 6.5921 10.7327 8.01054 10.7327C11.8069 10.7327 15.6034 14.7558 18.3568 18.3642C19.9838 20.4795 22.6955 19.5256 23.5299 20.6869C24.114 21.5164 22.8624 21.8897 22.8624 21.8897C22.8624 21.8897 23.9054 23.6731 21.9029 23.0095C21.9029 23.0095 22.5704 25.1248 20.1507 24.2123C20.1507 24.2123 19.6084 25.581 18.4402 24.71C16.8966 23.5487 18.1482 20.0647 13.6426 19.0278C6.04976 17.2029 7.50991 14.4655 7.00929 13.8019C6.75897 13.4286 5.63257 12.9724 5.63257 12.5576Z" fill="#FF17DA"/>
        </svg>
        </div>
        {isMobile && 
          <p className={styles.mobileText}>Olive Org</p>
        }
        </div>
        {isMobile ? (
          <>
            <div className={styles.hamburger} onClick={()=>setIsOpen((cur)=>!cur)}>
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fillRule="evenodd" clipRule="evenodd" d="M0 5.4498C0 2.4399 2.4399 0 5.4498 0C8.4597 0 10.8995 2.4399 10.8995 5.4498C10.8995 8.4597 8.4596 10.8995 5.4498 10.8995C2.44 10.8995 0 8.4596 0 5.4498Z" fill="white"/>
              <path fillRule="evenodd" clipRule="evenodd" d="M12.6201 18.0703C12.6201 15.0605 15.06 12.6205 18.0699 12.6205C21.0796 12.6205 23.5196 15.0604 23.5196 18.0703C23.5196 21.08 21.0796 23.52 18.0699 23.52C15.0601 23.52 12.6201 21.08 12.6201 18.0703Z" fill="white"/>
              <path d="M12.9355 5.292C12.9355 2.7973 12.9355 1.55 13.7105 0.775C14.4855 0 15.7329 0 18.2275 0C20.7221 0 21.9695 0 22.7445 0.775C23.5195 1.55 23.5195 2.7973 23.5195 5.292C23.5195 7.7867 23.5195 9.034 22.7445 9.809C21.9695 10.584 20.7222 10.584 18.2275 10.584C15.7328 10.584 14.4855 10.584 13.7105 9.809C12.9355 9.034 12.9355 7.7867 12.9355 5.292Z" fill="#B2FF76"/>
              <path d="M0 18.292C0 15.7973 5.96046e-07 14.55 0.775001 13.775C1.55 13 2.7974 13 5.292 13C7.7866 13 9.034 13 9.809 13.775C10.584 14.55 10.584 15.7973 10.584 18.292C10.584 20.7867 10.584 22.034 9.809 22.809C9.034 23.584 7.7867 23.584 5.292 23.584C2.7973 23.584 1.55 23.584 0.775001 22.809C5.96046e-07 22.034 0 20.7867 0 18.292Z" fill="#B2FF76"/>
              </svg>
            </div>

            {isOpen &&
              <div className={styles.dropDown} onMouseLeave={()=>setIsOpen(false)}>
                {navItems.map((item,i)=>{
                  return(
                    <p key={i} className={styles.dropDownItem} onClick={()=>handleClick(i,item.link)}>{item.name}</p>
                  )
                })}
              </div>
            }
          </>
        ):(
          <>
            <div className={styles.itemsWrapper}>
              {navItems.map((item,i)=>{
                return(
                  <p key={i} className={activeIndex === i ? `${styles.active}` : ""} onClick={()=>handleClick(i,item.link)}>{item.name}</p>
                )
              })}
            </div>
            <div className={styles.contactUs} onClick={handleContact}>
              <p>Contact Us</p>
              <div className={styles.svgContainer}>
                <svg width="16px" height="12px" viewBox="0 0 16 12" fill="black">
                  <path d="M14 0H2C1.46974 0.000541441 0.961363 0.201851 0.586413 0.559758C0.211463 0.917665 0.000567223 1.40293 0 1.90909V10.0909C0.000567223 10.5971 0.211463 11.0823 0.586413 11.4402C0.961363 11.7981 1.46974 11.9995 2 12H14C14.5303 11.9995 15.0386 11.7981 15.4136 11.4402C15.7885 11.0823 15.9994 10.5971 16 10.0909V1.90909C15.9994 1.40293 15.7885 0.917665 15.4136 0.559758C15.0386 0.201851 14.5303 0.000541441 14 0ZM13.4936 3.15784L8.35071 6.97602C8.25043 7.05044 8.12702 7.09084 8 7.09084C7.87298 7.09084 7.74957 7.05044 7.64929 6.97602L2.50643 3.15784C2.446 3.11428 2.39525 3.0597 2.35712 2.99726C2.31899 2.93482 2.29424 2.86576 2.2843 2.79411C2.27437 2.72246 2.27946 2.64964 2.29926 2.57988C2.31907 2.51012 2.3532 2.44481 2.39968 2.38776C2.44615 2.3307 2.50405 2.28302 2.56999 2.24751C2.63594 2.21199 2.70862 2.18934 2.78382 2.18087C2.85901 2.17239 2.93522 2.17827 3.00802 2.19816C3.08081 2.21804 3.14874 2.25154 3.20786 2.2967L8 5.85443L12.7921 2.2967C12.912 2.21033 13.0626 2.17244 13.2115 2.19124C13.3603 2.21005 13.4955 2.28402 13.5876 2.39718C13.6798 2.51033 13.7216 2.65357 13.704 2.79592C13.6864 2.93826 13.6108 3.06828 13.4936 3.15784Z" fill="black"/>
                </svg>
              </div>
            </div>
          </>
        )}
    </nav>
  )
}
